# Власні розширення

go-hbars додає невеликий набір **власних розширень**, яких немає в стандартному Handlebars.js. Вони вмикаються через hash-опції і не змінюють поведінку за замовчуванням.

## includeZero

**Доступність:** `{{#if}}` та `{{#unless}}`

За замовчуванням числовий нуль (`0`, `0.0`) вважається хибним: `{{#if count}}...{{/if}}` пропускає блок, коли `count` дорівнює `0`. Опція **includeZero** робить числовий нуль істинним для цього блоку, тобто блок рендериться, коли значення дорівнює нулю.

**Синтаксис:**
```handlebars
{{#if count includeZero=true}}
  Zero or positive
{{else}}
  Missing or negative
{{/if}}
```

**Поведінка:**
- `includeZero=true` — числовий нуль вважається істинним; блок виконується при значенні `0` (або `0.0`).
- Не вказано або `includeZero=false` — стандартна поведінка: нуль хибний.
- Впливає лише на перший (умовний) аргумент; інші hash-опції для цієї логіки ігноруються.
- Підтримується `json.Number` при декодуванні JSON з `UseNumber()`.

**Приклад:**
```handlebars
{{! count дорівнює 0 }}
{{#if count includeZero=true}}show{{else}}hide{{/if}}
{{! вивід: show }}

{{#if count}}show{{else}}hide{{/if}}
{{! вивід: hide }}
```

**Навіщо:** Коли нуль є коректним, «наявним» значенням (наприклад «0 елементів» замість «немає даних») і потрібно, щоб основний блок виконувався для нуля без зміни структури даних.

---

## Універсальна секція

**Доступність:** будь-який блок `{{#name}}...{{/name}}`, який **не** є вбудованим (`if`, `unless`, `with`, `each`) і **не** зареєстрованим хелпером.

Для `{{#anything}}...{{/anything}}`, якщо `anything` не є відомим блоковим хелпером, go-hbars трактує це як **секцію**: розв’язати `anything` з контексту; якщо істинно — рендерити блок з цим значенням як контекстом; інакше рендерити гілку `{{else}}`, якщо вона є. За семантикою це те саме, що `{{#with anything}}...{{else}}...{{/with}}`.

**Синтаксис:**
```handlebars
{{#date}}
  <span>{{date}}</span>
{{else}}
  no date
{{/date}}
```
Без виразу після імені в якості шляху використовується ім’я блоку. Також можна писати `{{#section some.path}}...{{/section}}` — тоді виразом буде `some.path`.

**Поведінка:**
- **Зареєстрований хелпер має пріоритет** — якщо `date` (або інше ім’я) є в реєстрі хелперів як блоковий хелпер, викликається саме він.
- **Інакше — секція** — блок компілюється як `{{#with <expr>}}...{{else}}...{{/with}}`, де `<expr>` — перший аргумент блоку або, якщо його немає, ім’я блоку. Тобто `{{#date}}` використовує ключ контексту `date`; `{{#foo bar}}` — вираз `bar`.
- Узгоджено з **Handlebars.java** та подібними рушіями, де `{{#date}}` означає «якщо date присутній, рендерити блок з date як контекстом».

**Приклад:**
```handlebars
{{! data: { date: "2024-01-15" } }}
{{#date}}{{date}}{{/date}}
{{! вивід: 2024-01-15 }}

{{! data: { date: "" } }}
{{#date}}shown{{else}}none{{/date}}
{{! вивід: none }}
```
